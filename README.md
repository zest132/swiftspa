# SwiftSPA

**ê²½ëŸ‰ Web Components ê¸°ë°˜ SPA í”„ë ˆì„ì›Œí¬**

SwiftSPAëŠ” **ë¼ìš°íŒ…, í˜ì´ì§€ êµì²´, Web Components, ì¡°ê±´ë¶€
ë Œë”ë§(data-if)** ì„ ê¸°ë°˜ìœ¼ë¡œ\
ë ˆê±°ì‹œ HTML í”„ë¡œì íŠ¸ì—ì„œë„ ì‰½ê²Œ ë„ì… ê°€ëŠ¥í•œ ì´ˆê²½ëŸ‰ SPA ì—”ì§„ì´ë‹¤.

ê°€ìƒ DOM ì—†ì´ ìˆœìˆ˜ DOM ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°,\
UI/ë””ìì¸/ì• ë‹ˆë©”ì´ì…˜ì€ í”„ë¡œì íŠ¸ê°€ ììœ ë¡­ê²Œ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ì™„ì „íˆ
ë¶„ë¦¬í•œë‹¤.

------------------------------------------------------------------------

## ğŸš€ íŠ¹ì§•

### âœ” Zero-dependency

ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ ì‹¤í–‰ëœë‹¤.

### âœ” Web Components ê¸°ë°˜

Shadow DOM ì»´í¬ë„ŒíŠ¸ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ í™œìš©í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°.

### âœ” í˜ì´ì§€ êµì²´ ë°©ì‹ SPA ë¼ìš°íŒ…

`/pages/**/index.html` ê·œì¹™ë§Œ ì§€í‚¤ë©´ ìë™ ë¼ìš°íŒ… ì²˜ë¦¬.

### âœ” ì¡°ê±´ë¶€ ë Œë”ë§(data-if) ì œê³µ

`<div data-if="auth">` í˜•íƒœë¡œ ê°„ë‹¨í•œ ë Œë”ë§ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤.

### âœ” í™•ì¥ ê°€ëŠ¥í•œ ì´ë²¤íŠ¸ í›…

`spa:navigate`, `state:changed` ë“± ì´ë²¤íŠ¸ë¥¼ í†µí•´\
AOS, GSAP, GA4, ë¡œê·¸ì¸ ìƒíƒœ ì œì–´ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ í”„ë¡œì íŠ¸ ì¸¡ì—ì„œ
ììœ ë¡­ê²Œ í™•ì¥í•  ìˆ˜ ìˆë‹¤.

------------------------------------------------------------------------

## ğŸ“¦ ì„¤ì¹˜ (Git Submodule)

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì•„ë˜ ëª…ë ¹ì„ ì‹¤í–‰:

``` sh
git submodule add https://github.com/zest132/swiftspa.git static/swiftspa
```

í”„ë¡œì íŠ¸ êµ¬ì¡° ì˜ˆ:

    static/
      swiftspa/       â† Git submodule
      pages/
      components/
      styles/

------------------------------------------------------------------------

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

    swiftspa/
     â”œâ”€ core/
     â”‚   â”œâ”€ spa.js              # SPA ë¼ìš°í„° / navigate() / ë‚´ë¶€ ë§í¬ ì¸í„°ì…‰íŠ¸
     â”‚   â”œâ”€ conditional.js      # data-if ì¡°ê±´ë¶€ ë Œë”ë§
     â”‚   â”œâ”€ dom.js              # fetchText, queryAllDeep ìœ í‹¸
     â”‚   â”œâ”€ state.js            # ê¸€ë¡œë²Œ ìƒíƒœ/í›… (state:changed)
     â”‚   â””â”€ global.js           # ì„ íƒì  ì „ì—­ ìœ í‹¸
     â”œâ”€ styles/
     â”‚   â””â”€ reset.css           # ê¸°ë³¸ CSS reset
     â””â”€ index.js                # createSpa(), startSpa() public API

------------------------------------------------------------------------

## ğŸ§­ ë¹ ë¥¸ ì‹œì‘

HTMLì—ì„œ SwiftSPAë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ê¸°ë³¸ ì˜ˆì œ:

``` html
<script type="module">
    import { createSpa, startSpa } from "/swiftspa/index.js";

    // 1) ì´ë²¤íŠ¸ í›… (ì„ íƒ)
    window.addEventListener("spa:navigate", (e) => {
        console.log("Page changed:", e.detail.path);
    });

    // 2) SPA ì„¤ì •
    createSpa({
        resolvePageUrl: (path, def) => {
            if (path === "/") return "/pages/public/landing/index.html";
            return def(path);
        }
    });

    // 3) ì‹¤í–‰
    startSpa();
</script>
```

------------------------------------------------------------------------
## ì´ë²¤íŠ¸ í›… ì‹¤í–‰ ìˆœì„œ

1.DOMContentLoaded  ìµœì´ˆë¡œë“œì‹œ html íŒŒì‹± ì™„ë£Œ
2.ì¡°ê±´ë¶€ ëœë”ë§ (data-if) ì´ ì‹œì ì—ëŠ” spaí˜ì´ì§€ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ
3. ì‚¬ìš©ìê°€ startSpa(); í˜¸ì¶œ


4. html dom ì‚½ì…
5. í˜ì´ì§€ css ë¡œë“œ
6. í˜ì´ì§€ js ë¡œë“œ -> init() ì‹¤í–‰
  - ì´ë¯¸ì§€ ë¡œë”© ì „
  - spa:navigate ì´ë²¤íŠ¸ ë°œìƒ ì „
7. spa:navigate
  - í˜ì´ì§€ ì „í™˜ì´ ì™„ë£Œ

8.spa:afterRender
  - ì• ë‹ˆë©”ì´ì…˜
  - AOS
  - ë ˆì´ì•„ì›ƒ ê³„ì‚°

9.WebComponent Lazy Load
  - ì›¹ ì»´í¬ë„ŒíŠ¸ ë¡œë“œ
  - onReady(shadow) ì‹¤í–‰

* ë§í¬ í´ë¦­(dom êµì²´ì‹œ)  4ë²ˆ ë¶€í„° ì‹¤í–‰


## init() ì— ì í•©í•œ ì‘ì—…
- ì´ë²¤íŠ¸ ë°”ì¸ë”©
- DOM ì¿¼ë¦¬
- fetch ì‹œì‘
- ìƒíƒœ ì´ˆê¸°í™”

## spa:navigate ì— ì í•©í•œ ì‘ì—…
- ê³µí†µ ë ˆì´ì•„ì›ƒ ì œì–´
- ì¡°ê±´ë¶€ UI ì¬ê³„ì‚°
- ë©”ë‰´ active ì²˜ë¦¬
- í˜ì´ì§€ ì „í™˜ ê°ì§€ ë¡œì§

## spa:afterRender ì— ì í•©í•œ ì‘ì—…
- ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
- scroll ê³„ì‚°
- ì´ë¯¸ì§€ ê¸°ì¤€ ë ˆì´ì•„ì›ƒ ì¡°ì •


------------------------------------------------------------------------

## ğŸ“ í˜ì´ì§€ êµ¬ì¡°

SwiftSPAëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ìŒ ê·œì¹™ì„ ë”°ë¥¸ë‹¤:

    /pages/<route>/index.html

ì˜ˆì‹œ:

    /pages/public/landing/index.html
    /pages/public/reservations/new/index.html
    /pages/admin/index.html

navigate()ê°€ ìë™ìœ¼ë¡œ HTML ì¡°ê°ì„ ë¡œë“œí•˜ì—¬\
`#app-main`ì— ì‚½ì…í•œë‹¤.

------------------------------------------------------------------------

## ğŸ› ì¡°ê±´ë¶€ ë Œë”ë§ (data-if)

HTML:

``` html
<div data-if="auth">ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ë³´ì„</div>
<div data-if="guest">ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì ì „ìš©</div>
```

JSì—ì„œ ì¸ì¦ ìƒíƒœ ë³€ê²½ ì‹œ:

``` js
window.dispatchEvent(
  new CustomEvent("state:changed", {
    detail: { auth: true }
  })
);
```

SwiftSPAëŠ” ìë™ìœ¼ë¡œ UIë¥¼ ê°±ì‹ í•œë‹¤.

------------------------------------------------------------------------

## ğŸ¨ AOS / GSAP ì—°ë™

SwiftSPAëŠ” ë””ìì¸/ì• ë‹ˆë©”ì´ì…˜ì„ ê°•ì œí•˜ì§€ ì•ŠëŠ”ë‹¤.

``` js
window.addEventListener("spa:navigate", () => {
    if (window.AOS) {
        AOS.refreshHard();
    }
});
```

------------------------------------------------------------------------

## ğŸ§ª ê°œë°œ ì² í•™

-   ë ˆê±°ì‹œ HTML í”„ë¡œì íŠ¸ì—ì„œë„ ìì—°ìŠ¤ëŸ½ê²Œ ì‚¬ìš© ê°€ëŠ¥\
-   Web Components í‘œì¤€ ê¸°ë°˜\
-   UI/ë””ìì¸ì€ ê°•ì œí•˜ì§€ ì•Šê³  "ê¸°ëŠ¥"ë§Œ ì œê³µ\
-   React/Vueì²˜ëŸ¼ ê³¼ë„í•œ ì¶”ìƒí™” ì—†ì´ í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ì œê³µ

------------------------------------------------------------------------

## ğŸ“„ License

MIT License

------------------------------------------------------------------------

## ğŸ™Œ Contributions

ë²„ê·¸ ì œë³´ ë° PRì„ í™˜ì˜í•©ë‹ˆë‹¤!
